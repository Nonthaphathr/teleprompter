<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Prompter Remote Thai</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0; background-color: #000; color: white;
            font-family: 'Prompt', sans-serif;
            height: 100dvh;
            display: flex; flex-direction: column;
            overflow: hidden; user-select: none;
        }

        /* Tabs Selection */
        .tabs {
            display: flex; background: #111; border-bottom: 1px solid #333; height: 50px;
        }
        .tab-btn {
            flex: 1; background: none; border: none; color: #666; font-family: 'Prompt';
            font-size: 14px; cursor: pointer; border-bottom: 3px solid transparent;
        }
        .tab-btn.active { color: #00ff41; border-bottom-color: #00ff41; background: #0a0a0a; }

        /* Main Content Area */
        .tab-content { display: none; flex-grow: 1; height: calc(100dvh - 50px); }
        .tab-content.active { display: flex; flex-direction: column; }

        /* --- Mode 1: General (Grid) --- */
        .grid-layout {
            display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr 1fr;
            gap: 10px; padding: 10px; height: 100%;
        }
        .btn {
            background: #222; border: 1px solid #444; border-radius: 10px;
            color: white; font-size: 18px; font-family: 'Prompt';
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .btn:active { background: #444; transform: scale(0.98); }
        .btn-play { grid-column: span 2; background: #003300; border-color: #00ff41; color: #00ff41; font-size: 24px; }
        .btn-play.playing { background: #330000; border-color: red; color: red; }

        /* --- Mode 2: Speed Focus (Split) --- */
        .split-layout { display: flex; height: 100%; }
        .speed-pad {
            flex: 1; display: flex; align-items: center; justify-content: center;
            font-size: 24px; font-weight: bold; writing-mode: vertical-rl; text-orientation: upright;
        }
        .pad-slow { background: #221100; color: #ff9100; border-right: 1px solid #333; }
        .pad-fast { background: #002222; color: #00f3ff; }
        .pad-slow:active { background: #442200; }
        .pad-fast:active { background: #004444; }

        /* --- Mode 3: Speed + Scroll (4-Zone Grid) --- */
        .quad-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 40% 60%;
            height: 100%;
            gap: 0;
        }
        
        .zone {
            display: flex; align-items: center; justify-content: center;
            font-size: 28px; font-weight: bold; border: 1px solid #111;
        }
        
        .zone-slow {
            background: #221100; color: #ff9100;
        }
        .zone-slow:active { background: #442200; }
        
        .zone-fast {
            background: #002222; color: #00f3ff;
        }
        .zone-fast:active { background: #004444; }
        
        .zone-up {
            background: #002200; color: #00ff41;
            font-size: 32px;
        }
        .zone-up:active { background: #004400; }
        
        .zone-down {
            background: #220022; color: #ff00ff;
            font-size: 32px;
        }
        .zone-down:active { background: #440044; }

        /* Play Button for Mode 2 & 3 */
        .bottom-play-btn {
            height: 70px; background:#111; color:white; border:none; 
            border-top:1px solid #333; font-size:20px; cursor: pointer;
            font-family: 'Prompt';
        }
        .bottom-play-btn:active { background: #222; }

    </style>
</head>
<body>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('general')">üéõÔ∏è ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</button>
        <button class="tab-btn" onclick="switchTab('speed')">üöÄ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß</button>
        <button class="tab-btn" onclick="switchTab('quad')">üéÆ ‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ</button>
    </div>

    <!-- ‡πÇ‡∏´‡∏°‡∏î 1: ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ -->
    <div id="tab-general" class="tab-content active">
        <div class="grid-layout">
            <button class="btn btn-play" id="play-btn" onclick="togglePlay()">‚èØÔ∏è ‡πÄ‡∏•‡πà‡∏ô / ‡∏´‡∏¢‡∏∏‡∏î</button>
            
            <button class="btn" onclick="send('speed', -1)">üê¢ ‡∏ä‡πâ‡∏≤‡∏•‡∏á</button>
            <button class="btn" onclick="send('speed', 1)">‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô üêá</button>
            
            <button class="btn" onclick="send('font-size', -1)">‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å A-</button>
            <button class="btn" onclick="send('font-size', 1)">‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏ç‡πà A+</button>

            <button class="btn" onclick="send('mirror')">ü™û ‡∏Å‡∏•‡∏±‡∏ö‡∏î‡πâ‡∏≤‡∏ô</button>
            <button class="btn" onclick="send('reset')" style="color:red;">üîÑ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
        </div>
    </div>

    <!-- ‡πÇ‡∏´‡∏°‡∏î 2: ‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß -->
    <div id="tab-speed" class="tab-content">
        <div class="split-layout">
            <div class="speed-pad pad-slow" onclick="send('speed', -1)">üê¢ ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß</div>
            <div class="speed-pad pad-fast" onclick="send('speed', 1)">üêá ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß</div>
        </div>
        <button class="bottom-play-btn" onclick="togglePlay()">
            ‚èØÔ∏è ‡∏´‡∏¢‡∏∏‡∏î / ‡πÄ‡∏•‡πà‡∏ô
        </button>
    </div>

    <!-- ‡πÇ‡∏´‡∏°‡∏î 3: ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö (4 ‡πÇ‡∏ã‡∏ô) -->
    <div id="tab-quad" class="tab-content">
        <div class="quad-layout">
            <!-- ‡πÅ‡∏ñ‡∏ß‡∏ö‡∏ô: ‡πÄ‡∏£‡πá‡∏ß-‡∏ä‡πâ‡∏≤ -->
            <div class="zone zone-slow" onclick="send('speed', -1)">
                üê¢<br>‡∏ä‡πâ‡∏≤‡∏•‡∏á
            </div>
            <div class="zone zone-fast" onclick="send('speed', 1)">
                üêá<br>‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô
            </div>
            
            <!-- ‡πÅ‡∏ñ‡∏ß‡∏•‡πà‡∏≤‡∏á: ‡∏Ç‡∏∂‡πâ‡∏ô-‡∏•‡∏á (‡πÉ‡∏´‡∏ç‡πà‡∏Å‡∏ß‡πà‡∏≤) -->
            <div class="zone zone-up" onclick="send('scroll', 50)">
                ‚¨ÜÔ∏è<br>‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô
            </div>
            <div class="zone zone-down" onclick="send('scroll', -50)">
                ‚¨áÔ∏è<br>‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏•‡∏á
            </div>
        </div>
        <button class="bottom-play-btn" onclick="togglePlay()">
            ‚èØÔ∏è ‡∏´‡∏¢‡∏∏‡∏î / ‡πÄ‡∏•‡πà‡∏ô
        </button>
    </div>

    <script>
        const BACKEND_URL = "https://teleprompter-09ku.onrender.com";
        const socket = io(BACKEND_URL);
        const urlParams = new URLSearchParams(window.location.search);
        const sessionId = urlParams.get('session');
        let isPlaying = false;

        // ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
        socket.on('connect', () => {
            if (sessionId) socket.emit('join-session', sessionId);
        });

        // ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á
        function send(cmd, val) {
            if (!sessionId) return;
            if (navigator.vibrate) navigator.vibrate(30); // ‡∏™‡∏±‡πà‡∏ô
            socket.emit('send-command', { sessionId, command: cmd, value: val });
        }

        // ‡∏õ‡∏∏‡πà‡∏° Play
        function togglePlay() {
            isPlaying = !isPlaying;
            const playBtn = document.getElementById('play-btn');
            if (playBtn) {
                playBtn.innerText = isPlaying ? "‚è∏Ô∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß" : "‚èØÔ∏è ‡πÄ‡∏•‡πà‡∏ô / ‡∏ï‡πà‡∏≠";
                playBtn.classList.toggle('playing', isPlaying);
            }
            send('toggle');
        }

        // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Tab
        function switchTab(mode) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            
            document.getElementById('tab-' + mode).classList.add('active');
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
